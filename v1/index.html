<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººæè‚²æˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ v1</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        
        .control-group h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .slider {
            width: 100%;
            margin: 10px 0;
        }
        
        .chart-container {
            margin: 20px 0;
            height: 400px;
            position: relative;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: #f1f2f6;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        .year-display {
            text-align: center;
            font-size: 1.5em;
            margin: 20px 0;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; color: #2c3e50;">ğŸŒ å›½å®¶äººæè‚²æˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ v1</h1>
        
        <div class="year-display" id="yearDisplay">
            å¹´åº¦: 0å¹´ç›®
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalScore">63</div>
                <div class="stat-label">ç·åˆå›½åŠ›ã‚¹ã‚³ã‚¢</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="minScore">45</div>
                <div class="stat-label">æœ€å¼±è»¸ã‚¹ã‚³ã‚¢</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgScore">62</div>
                <div class="stat-label">å¹³å‡ã‚¹ã‚³ã‚¢</div>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <h3 id="uniLabel">ğŸ“ å¤§å­¦æŠ•è³‡: 30%</h3>
                <input type="range" class="slider" id="uniSlider" min="0" max="100" value="30" />
            </div>
            
            <div class="control-group">
                <h3 id="indLabel">ğŸ­ ç”£æ¥­æŠ•è³‡: 35%</h3>
                <input type="range" class="slider" id="indSlider" min="0" max="100" value="35" />
            </div>
            
            <div class="control-group">
                <h3 id="govLabel">ğŸ›ï¸ æ”¿åºœæŠ•è³‡: 15%</h3>
                <input type="range" class="slider" id="govSlider" min="0" max="100" value="15" />
            </div>
            
            <div class="control-group">
                <h3 id="resLabel">ğŸ”¬ ç ”ç©¶æŠ•è³‡: 20%</h3>
                <input type="range" class="slider" id="resSlider" min="0" max="100" value="20" />
            </div>
        </div>

        <div style="text-align: center; margin: 20px 0;">
            <button onclick="simulateYear()">1å¹´é€²ã‚ã‚‹</button>
            <button onclick="resetSimulation()">ãƒªã‚»ãƒƒãƒˆ</button>
        </div>

        <div class="chart-container">
            <canvas id="radarChart"></canvas>
        </div>
    </div>

    <script>
        // èƒ½åŠ›è»¸ã®å®šç¾©
        const CAPABILITY_AXES = [
            { key: 'basicScience', name: 'åŸºç¤ç§‘å­¦' },
            { key: 'appliedTech', name: 'å¿œç”¨æŠ€è¡“' },
            { key: 'digitalAI', name: 'ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ»AI' },
            { key: 'manufacturing', name: 'è£½é€ ãƒ»ã‚‚ã®ã¥ãã‚Š' },
            { key: 'finance', name: 'é‡‘èãƒ»çµŒæ¸ˆ' },
            { key: 'healthcare', name: 'åŒ»ç™‚ãƒ»ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢' },
            { key: 'energy', name: 'ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ»ç’°å¢ƒ' },
            { key: 'globalCompete', name: 'å›½éš›ç«¶äº‰åŠ›' },
            { key: 'innovation', name: 'ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³' },
            { key: 'education', name: 'æ•™è‚²åŸºç›¤' },
            { key: 'policyMaking', name: 'æ”¿ç­–ç«‹æ¡ˆ' },
            { key: 'implementation', name: 'ç¤¾ä¼šå®Ÿè£…åŠ›' }
        ];

        // åˆæœŸå›½åŠ›çŠ¶æ…‹
        const initialCapability = {
            basicScience: 70,
            appliedTech: 65,
            digitalAI: 55,
            manufacturing: 75,
            finance: 60,
            healthcare: 70,
            energy: 50,
            globalCompete: 45,
            innovation: 50,
            education: 65,
            policyMaking: 55,
            implementation: 60,
        };

        // ç¾åœ¨ã®çŠ¶æ…‹
        let year = 0;
        let capability = {...initialCapability};
        let investments = {
            university: 30,
            industry: 35,
            government: 15,
            research: 20,
        };
        let chart = null;

        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼è¦ç´ 
        const sliders = {
            university: document.getElementById('uniSlider'),
            industry: document.getElementById('indSlider'),
            government: document.getElementById('govSlider'),
            research: document.getElementById('resSlider')
        };

        const labels = {
            university: document.getElementById('uniLabel'),
            industry: document.getElementById('indLabel'),
            government: document.getElementById('govLabel'),
            research: document.getElementById('resLabel')
        };

        // ã‚¹ã‚³ã‚¢è¨ˆç®—
        function calculateScore(cap) {
            const values = Object.values(cap);
            const avg = values.reduce((a, b) => a + b, 0) / values.length;
            const min = Math.min(...values);
            return Math.round(avg * 0.6 + min * 0.4);
        }

        // çµ±è¨ˆæ›´æ–°
        function updateStats() {
            const values = Object.values(capability);
            const avg = values.reduce((a, b) => a + b, 0) / values.length;
            const min = Math.min(...values);
            const total = calculateScore(capability);
            
            document.getElementById('totalScore').textContent = total;
            document.getElementById('minScore').textContent = min.toFixed(0);
            document.getElementById('avgScore').textContent = avg.toFixed(0);
            document.getElementById('yearDisplay').textContent = `å¹´åº¦: ${year}å¹´ç›®`;
        }

        // ãƒãƒ£ãƒ¼ãƒˆæ›´æ–°
        function updateChart() {
            const ctx = document.getElementById('radarChart');
            if (chart) {
                chart.destroy();
            }

            const data = {
                labels: CAPABILITY_AXES.map(axis => axis.name),
                datasets: [{
                    label: 'ç¾åœ¨ã®å›½åŠ›',
                    data: CAPABILITY_AXES.map(axis => capability[axis.key]),
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    pointBackgroundColor: 'rgba(54, 162, 235, 1)',
                }]
            };

            chart = new Chart(ctx, {
                type: 'radar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    }
                }
            });
        }

        // 1å¹´åˆ†ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        function simulateYear() {
            // å¤§å­¦æŠ•è³‡åŠ¹æœ
            const uniEffect = investments.university / 100;
            capability.basicScience += uniEffect * 3;
            capability.education += uniEffect * 2;
            capability.innovation += uniEffect * 1.5;
            
            // ç”£æ¥­ç•ŒæŠ•è³‡åŠ¹æœ
            const indEffect = investments.industry / 100;
            capability.appliedTech += indEffect * 3;
            capability.manufacturing += indEffect * 2.5;
            capability.digitalAI += indEffect * 2;
            capability.implementation += indEffect * 2;
            
            // æ”¿åºœæŠ•è³‡åŠ¹æœ
            const govEffect = investments.government / 100;
            capability.policyMaking += govEffect * 3;
            capability.finance += govEffect * 2;
            
            // ç ”ç©¶æŠ•è³‡åŠ¹æœ
            const resEffect = investments.research / 100;
            capability.globalCompete += resEffect * 3;
            capability.healthcare += resEffect * 2;
            capability.energy += resEffect * 2;
            
            // ä¸Šé™ã‚’100ã«åˆ¶é™
            Object.keys(capability).forEach(key => {
                capability[key] = Math.min(100, capability[key]);
            });
            
            year++;
            updateStats();
            updateChart();
        }

        // ãƒªã‚»ãƒƒãƒˆ
        function resetSimulation() {
            year = 0;
            capability = {...initialCapability};
            updateStats();
            updateChart();
        }

        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ
        sliders.university.addEventListener('input', (e) => {
            investments.university = parseInt(e.target.value);
            labels.university.textContent = `ğŸ“ å¤§å­¦æŠ•è³‡: ${investments.university}%`;
        });

        sliders.industry.addEventListener('input', (e) => {
            investments.industry = parseInt(e.target.value);
            labels.industry.textContent = `ğŸ­ ç”£æ¥­æŠ•è³‡: ${investments.industry}%`;
        });

        sliders.government.addEventListener('input', (e) => {
            investments.government = parseInt(e.target.value);
            labels.government.textContent = `ğŸ›ï¸ æ”¿åºœæŠ•è³‡: ${investments.government}%`;
        });

        sliders.research.addEventListener('input', (e) => {
            investments.research = parseInt(e.target.value);
            labels.research.textContent = `ğŸ”¬ ç ”ç©¶æŠ•è³‡: ${investments.research}%`;
        });

        // åˆæœŸåŒ–
        window.addEventListener('load', () => {
            updateStats();
            updateChart();
        });
    </script>
</body>
</html>